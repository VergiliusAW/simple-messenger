{"version":3,"sources":["messenger/Message.module.css","messenger/MessengerFooter.module.css","messenger/MessageList.module.css","messenger/MessengerWindow.module.css","reportWebVitals.js","utils/joinBySpace.js","messenger/Message.js","messenger/MessageList.js","messenger/MessengerFooter.js","messenger/MessengerWindow.js","index.js"],"names":["module","exports","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","joinBySpace","args","join","Message","props","className","classes","message","isSelf","self","other","messageBody","p","name","user_name","children","MessageList","useEffect","document","getElementById","scrollTo","scrollHeight","id","list","messageList","map","user_id","text_message","FooterProfile","MessengerInput","input","autoComplete","FooterSendButton","useState","hovered","setHovered","toggleHover","svg","svgHovered","onMouseEnter","onMouseLeave","onClick","action","width","height","xmlns","fill-rule","clip-rule","d","FooterButton","button","addFunc","MessengerFooter","buttonAction","value","replaceAll","callbackAdd","footer","onSubmit","event","preventDefault","MessengerWindow","setMessageList","fetch","response","json","req","console","log","window","prevList","method","headers","Accept","body","JSON","stringify","r","Page","setUser_id","setUser_name","doFetch","login","prompt","password","res","catch","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.8aeba98c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"Message_message__3iQ7H\",\"messageBody\":\"Message_messageBody__8tnfO\",\"name\":\"Message_name__2Yf7o\",\"self\":\"Message_self__1_0l2\",\"p\":\"Message_p__imTQA\",\"other\":\"Message_other__URXYt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"MessengerFooter_input__a9iOb\",\"svg\":\"MessengerFooter_svg__llizC\",\"svgHovered\":\"MessengerFooter_svgHovered__3sAS_\",\"button\":\"MessengerFooter_button__1oTEo\",\"footer\":\"MessengerFooter_footer__3jDvk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"MessageList_list__3Daq0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"window\":\"MessengerWindow_window__30nFU\"};","const reportWebVitals = (onPerfEntry) => {\n    if (onPerfEntry && onPerfEntry instanceof Function) {\n        import(\"web-vitals\").then(\n            ({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n                getCLS(onPerfEntry)\n                getFID(onPerfEntry)\n                getFCP(onPerfEntry)\n                getLCP(onPerfEntry)\n                getTTFB(onPerfEntry)\n            }\n        )\n    }\n}\n\nexport default reportWebVitals\n","export default function joinBySpace(...args) {\n    return args.join(\" \")\n}\n","import React from \"react\"\nimport classes from \"./Message.module.css\"\nimport joinBySpace from \"../utils/joinBySpace\"\n\nexport default function Message(props) {\n    return (\n        <div\n            className={joinBySpace(\n                classes.message,\n                props.isSelf ? classes.self : classes.other\n            )}\n        >\n            <p className={joinBySpace(classes.messageBody, classes.p)}>\n                <p className={classes.name}>{props.user_name}</p>\n                {props.children}\n            </p>\n        </div>\n    )\n}\n","import React, { useEffect, useState } from \"react\"\nimport Message from \"./Message\"\nimport classes from \"./MessageList.module.css\"\n\nexport default function MessageList(props) {\n    useEffect(() =>\n        document\n            .getElementById(\"message-list\")\n            .scrollTo(0, document.getElementById(\"message-list\").scrollHeight)\n    )\n    return (\n        <div id={\"message-list\"} className={classes.list}>\n            {props.messageList.map((message) => (\n                <Message\n                    key={message.id}\n                    isSelf={message.user_id === props.user_id}\n                    user_name={message.user_name}\n                >\n                    {message.text_message}\n                </Message>\n            ))}\n        </div>\n    )\n}\n","import React, { useState } from \"react\"\nimport join from \"../utils/joinBySpace\"\nimport classes from \"./MessengerFooter.module.css\"\n\nfunction FooterProfile() {\n    return <></>\n}\n\nfunction MessengerInput() {\n    return (\n        <input\n            id={\"inp-msg\"}\n            className={classes.input}\n            autoComplete={\"off\"}\n        ></input>\n    )\n}\n\nfunction FooterSendButton(props) {\n    const [hovered, setHovered] = useState(false)\n    const toggleHover = () => setHovered(!hovered)\n    return (\n        <div\n            className={join(classes.svg, hovered ? classes.svgHovered : \"\")}\n            onMouseEnter={toggleHover}\n            onMouseLeave={toggleHover}\n            onClick={props.action}\n        >\n            <svg\n                width=\"24\"\n                height=\"24\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                fill-rule=\"evenodd\"\n                clip-rule=\"evenodd\"\n            >\n                <path d=\"M24 12c0 6.623-5.377 12-12 12s-12-5.377-12-12 5.377-12 12-12 12 5.377 12 12zm-1 0c0 6.071-4.929 11-11 11s-11-4.929-11-11 4.929-11 11-11 11 4.929 11 11zm-11.5-4.828l-3.763 4.608-.737-.679 5-6.101 5 6.112-.753.666-3.747-4.604v11.826h-1v-11.828z\" />\n            </svg>\n        </div>\n    )\n}\n\nfunction FooterButton(props) {\n    return (\n        <div className={classes.button}>\n            <FooterSendButton action={props.addFunc} />\n        </div>\n    )\n}\n\nexport default function MessengerFooter(props) {\n    const submit = (event) => {\n        event.preventDefault()\n        buttonAction()\n    }\n\n    function buttonAction() {\n        const message = {\n            text_message: document.getElementById(\"inp-msg\").value,\n        }\n        if (message.text_message.replaceAll(\" \", \"\") !== \"\") {\n            props.callbackAdd(message)\n            document.getElementById(\"inp-msg\").value = \"\"\n        }\n        // console.log('Отправляет данные из инпута на сервер. Пока ожидает отправки появляется лоадер')\n    }\n\n    return (\n        <form className={classes.footer} onSubmit={submit}>\n            <FooterProfile />\n            <MessengerInput />\n            <FooterButton addFunc={buttonAction} />\n        </form>\n    )\n}\n","import React, { useEffect, useRef, useState } from \"react\"\nimport MessageList from \"./MessageList\"\nimport MessengerFooter from \"./MessengerFooter\"\nimport classes from \"./MessengerWindow.module.css\"\n\nexport default function MessengerWindow(props) {\n    const [messageList, setMessageList] = useState([])\n    useEffect(() => {\n        if (props.user_id !== 0)\n            fetch(\"/api/messages\").then((response) => {\n                response.json().then((req) => {\n                    console.log(req)\n                    setMessageList(req)\n                })\n            })\n    }, [props.user_id])\n\n    function addMessageToList(message) {\n        message = {\n            text_message: message.text_message,\n            user_id: props.user_id,\n            user_name: props.user_name,\n        }\n        setMessageList((prevList) => [...prevList, message])\n        fetch(\"/api/message\", {\n            method: \"post\",\n            headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n                message: message.text_message,\n                user_id: props.user_id,\n            }),\n        }).then((r) => console.log(\"message delivered\"))\n    }\n\n    return (\n        <div className={classes.window}>\n            {props.user_id !== 0 && (\n                <>\n                    <MessageList\n                        user_id={props.user_id}\n                        messageList={messageList}\n                    />\n                    <MessengerFooter callbackAdd={addMessageToList} />\n                </>\n            )}\n        </div>\n    )\n}\n","import React, { useEffect, useState } from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./index.css\"\nimport reportWebVitals from \"./reportWebVitals\"\nimport MessengerWindow from \"./messenger/MessengerWindow\"\nimport * as PropTypes from \"prop-types\"\n\nfunction Page() {\n    const [user_id, setUser_id] = useState(0)\n    const [user_name, setUser_name] = useState(\"\")\n    function doFetch() {\n        let login = prompt(\"User name:\", \"\")\n        let password = prompt(\"Password:\")\n        fetch(\"/api/getId\", {\n            method: \"post\",\n            headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n                login: login,\n                password: password,\n            }),\n        }).then((response) => {\n            response\n                .json()\n                .then((res) => {\n                    console.log(res)\n                    if (res.user_id != null) {\n                        setUser_id(res.user_id)\n                        setUser_name(res.user_name)\n                    } else doFetch()\n                })\n                .catch(() => {\n                    doFetch()\n                })\n        })\n    }\n\n    useEffect(() => {\n        doFetch()\n    }, [])\n    return <MessengerWindow user_id={user_id} user_name={user_name} />\n}\n\nPage.propTypes = { children: PropTypes.node }\nReactDOM.render(\n    <React.StrictMode>\n        <Page />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}