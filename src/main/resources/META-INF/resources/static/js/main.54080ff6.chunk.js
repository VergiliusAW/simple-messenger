(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],[,,,function(e,t,s){e.exports={message:"Message_message__ARapR",messageBody:"Message_messageBody__rrYqo",name:"Message_name__66eCR",self:"Message_self__3ho0W",p:"Message_p__3_RWR",other:"Message_other__2SJ0e"}},function(e,t,s){e.exports={input:"MessengerFooter_input__2eBd3",svg:"MessengerFooter_svg__2HnRU",svgHovered:"MessengerFooter_svgHovered__2kxrd",button:"MessengerFooter_button__2esLt",footer:"MessengerFooter_footer__3zgJR"}},,,,,function(e,t,s){e.exports={list:"MessageList_list__1f_cV"}},function(e,t,s){e.exports={window:"MessengerWindow_window__2BuBe"}},,,,,,,function(e,t,s){},function(e,t,s){"use strict";s.r(t);var n=s(2),c=s(0),o=s(1),a=s.n(o),r=s(8),i=s.n(r),u=(s(17),function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,19)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,a=t.getTTFB;s(e),n(e),c(e),o(e),a(e)}))}),d=s(11),l=s(3),g=s.n(l);function _(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.join(" ")}function m(e){return Object(c.jsx)("div",{className:_(g.a.message,e.isSelf?g.a.self:g.a.other),children:Object(c.jsxs)("p",{className:_(g.a.messageBody,g.a.p),children:[Object(c.jsx)("p",{className:g.a.name,children:e.user_name}),e.children]})})}var j=s(9),f=s.n(j);function p(e){return Object(o.useEffect)((function(){return document.getElementById("message-list").scrollTo(0,document.getElementById("message-list").scrollHeight)})),Object(c.jsx)("div",{id:"message-list",className:f.a.list,children:e.messageList.map((function(t){return Object(c.jsx)(m,{isSelf:t.user_id===e.user_id,user_name:t.user_name,children:t.text_message},t.id)}))})}var b=s(4),h=s.n(b);function O(){return Object(c.jsx)(c.Fragment,{})}function v(){return Object(c.jsx)("input",{id:"inp-msg",className:h.a.input,autoComplete:"off"})}function x(e){var t=Object(o.useState)(!1),s=Object(n.a)(t,2),a=s[0],r=s[1],i=function(){return r(!a)};return Object(c.jsx)("div",{className:_(h.a.svg,a?h.a.svgHovered:""),onMouseEnter:i,onMouseLeave:i,onClick:e.action,children:Object(c.jsx)("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg","fill-rule":"evenodd","clip-rule":"evenodd",children:Object(c.jsx)("path",{d:"M24 12c0 6.623-5.377 12-12 12s-12-5.377-12-12 5.377-12 12-12 12 5.377 12 12zm-1 0c0 6.071-4.929 11-11 11s-11-4.929-11-11 4.929-11 11-11 11 4.929 11 11zm-11.5-4.828l-3.763 4.608-.737-.679 5-6.101 5 6.112-.753.666-3.747-4.604v11.826h-1v-11.828z"})})})}function w(e){return Object(c.jsx)("div",{className:h.a.button,children:Object(c.jsx)(x,{action:e.addFunc})})}function M(e){function t(){var t={text_message:document.getElementById("inp-msg").value};""!==t.text_message.replaceAll(" ","")&&(e.callbackAdd(t),document.getElementById("inp-msg").value="")}return Object(c.jsxs)("form",{className:h.a.footer,onSubmit:function(e){e.preventDefault(),t()},children:[Object(c.jsx)(O,{}),Object(c.jsx)(v,{}),Object(c.jsx)(w,{addFunc:t})]})}var y=s(10),F=s.n(y);function B(e){var t=Object(o.useState)([]),s=Object(n.a)(t,2),a=s[0],r=s[1];return Object(o.useEffect)((function(){0!==e.user_id&&fetch("/api/messages").then((function(e){e.json().then((function(e){console.log(e),r(e)}))}))}),[e.user_id]),Object(c.jsx)("div",{className:F.a.window,children:0!==e.user_id&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(p,{user_id:e.user_id,messageList:a}),Object(c.jsx)(M,{callbackAdd:function(t){t={text_message:t.text_message,user_id:e.user_id,user_name:e.user_name},r((function(e){return[].concat(Object(d.a)(e),[t])})),fetch("/api/message",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({message:t.text_message,user_id:e.user_id})}).then((function(e){return console.log("message delivered")}))}})]})})}function S(){var e=Object(o.useState)(0),t=Object(n.a)(e,2),s=t[0],a=t[1],r=Object(o.useState)(""),i=Object(n.a)(r,2),u=i[0],d=i[1];function l(){var e=prompt("User name:",""),t=prompt("Password:");fetch("/api/getId",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({login:e,password:t})}).then((function(e){e.json().then((function(e){console.log(e),null!=e.user_id?(a(e.user_id),d(e.user_name)):l()})).catch((function(){l()}))}))}return Object(o.useEffect)((function(){l()}),[]),Object(c.jsx)(B,{user_id:s,user_name:u})}i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(S,{})}),document.getElementById("root")),u()}],[[18,1,2]]]);
//# sourceMappingURL=main.54080ff6.chunk.js.map