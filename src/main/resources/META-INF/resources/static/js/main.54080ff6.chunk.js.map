{"version":3,"sources":["messenger/Message.module.css","messenger/MessengerFooter.module.css","messenger/MessageList.module.css","messenger/MessengerWindow.module.css","reportWebVitals.js","utils/joinBySpace.js","messenger/Message.js","messenger/MessageList.js","messenger/MessengerFooter.js","messenger/MessengerWindow.js","index.js"],"names":["module","exports","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","joinBySpace","args","join","Message","props","className","classes","message","isSelf","self","other","messageBody","p","name","user_name","children","MessageList","useEffect","document","getElementById","scrollTo","scrollHeight","id","list","messageList","map","user_id","text_message","FooterProfile","MessengerInput","input","autoComplete","FooterSendButton","useState","hovered","setHovered","toggleHover","svg","svgHovered","onMouseEnter","onMouseLeave","onClick","action","width","height","xmlns","fill-rule","clip-rule","d","FooterButton","button","addFunc","MessengerFooter","buttonAction","value","replaceAll","callbackAdd","footer","onSubmit","event","preventDefault","MessengerWindow","setMessageList","fetch","response","json","req","console","log","window","prevList","method","headers","Accept","body","JSON","stringify","r","Page","setUser_id","setUser_name","doFetch","login","prompt","password","res","catch","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.54080ff6.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"Message_message__ARapR\",\"messageBody\":\"Message_messageBody__rrYqo\",\"name\":\"Message_name__66eCR\",\"self\":\"Message_self__3ho0W\",\"p\":\"Message_p__3_RWR\",\"other\":\"Message_other__2SJ0e\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"MessengerFooter_input__2eBd3\",\"svg\":\"MessengerFooter_svg__2HnRU\",\"svgHovered\":\"MessengerFooter_svgHovered__2kxrd\",\"button\":\"MessengerFooter_button__2esLt\",\"footer\":\"MessengerFooter_footer__3zgJR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"MessageList_list__1f_cV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"window\":\"MessengerWindow_window__2BuBe\"};","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","export default function joinBySpace(...args) {\r\n    return args.join(' ')\r\n}","import React from 'react'\r\nimport classes from './Message.module.css'\r\nimport joinBySpace from \"../utils/joinBySpace\";\r\n\r\nexport default function Message(props) {\r\n    return (\r\n        <div className={joinBySpace(classes.message, props.isSelf ? classes.self : classes.other)}>\r\n            <p className={joinBySpace(classes.messageBody,classes.p)}>\r\n                <p className={classes.name}>\r\n                    {props.user_name}\r\n                </p>\r\n                {props.children}\r\n            </p>\r\n        </div>\r\n    )\r\n}","import React, {useEffect, useState} from 'react'\r\nimport Message from \"./Message\";\r\nimport classes from \"./MessageList.module.css\"\r\n\r\nexport default function MessageList(props) {\r\n    useEffect(() => document.getElementById(\"message-list\").scrollTo(0,document.getElementById(\"message-list\").scrollHeight))\r\n    return (\r\n        <div id={\"message-list\"} className={classes.list}>\r\n            {props.messageList.map((message) => (\r\n                    <Message key={message.id} isSelf={message.user_id === props.user_id} user_name={message.user_name}>{message.text_message}</Message>\r\n                )\r\n            )}\r\n        </div>\r\n    )\r\n}","import React, {useState} from 'react';\r\nimport join from '../utils/joinBySpace'\r\nimport classes from './MessengerFooter.module.css'\r\n\r\nfunction FooterProfile() {\r\n    return (\r\n        <>\r\n        </>\r\n    )\r\n}\r\n\r\nfunction MessengerInput() {\r\n    return (\r\n        <input\r\n            id={'inp-msg'}\r\n            className={classes.input}\r\n            autoComplete={'off'}>\r\n        </input>\r\n    )\r\n}\r\n\r\nfunction FooterSendButton(props) {\r\n    const [hovered, setHovered] = useState(false);\r\n    const toggleHover = () => setHovered(!hovered);\r\n    return (\r\n        <div\r\n            className={join(classes.svg, hovered ? classes.svgHovered : '')}\r\n            onMouseEnter={toggleHover}\r\n            onMouseLeave={toggleHover}\r\n            onClick={props.action}\r\n        >\r\n            <svg width=\"24\" height=\"24\" xmlns=\"http://www.w3.org/2000/svg\" fill-rule=\"evenodd\" clip-rule=\"evenodd\">\r\n                <path\r\n                    d=\"M24 12c0 6.623-5.377 12-12 12s-12-5.377-12-12 5.377-12 12-12 12 5.377 12 12zm-1 0c0 6.071-4.929 11-11 11s-11-4.929-11-11 4.929-11 11-11 11 4.929 11 11zm-11.5-4.828l-3.763 4.608-.737-.679 5-6.101 5 6.112-.753.666-3.747-4.604v11.826h-1v-11.828z\"/>\r\n            </svg>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction FooterButton(props) {\r\n    return (\r\n        <div\r\n            className={classes.button}>\r\n            <FooterSendButton\r\n                action={props.addFunc}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default function MessengerFooter(props) {\r\n\r\n    const submit = (event) => {\r\n        event.preventDefault()\r\n        buttonAction()\r\n    }\r\n\r\n    function buttonAction() {\r\n        const message = {\r\n            text_message: document.getElementById('inp-msg').value\r\n        }\r\n        if (message.text_message.replaceAll(\" \",\"\")!==\"\") {\r\n            props.callbackAdd(message)\r\n            document.getElementById('inp-msg').value = \"\"\r\n        }\r\n        // console.log('Отправляет данные из инпута на сервер. Пока ожидает отправки появляется лоадер')\r\n    }\r\n\r\n    return (\r\n        <form\r\n            className={classes.footer}\r\n            onSubmit={submit}\r\n        >\r\n            <FooterProfile/>\r\n            <MessengerInput/>\r\n            <FooterButton\r\n                addFunc={buttonAction}\r\n            />\r\n        </form>\r\n    )\r\n}","import React, {useEffect, useRef, useState} from 'react'\r\nimport MessageList from \"./MessageList\";\r\nimport MessengerFooter from \"./MessengerFooter\";\r\nimport classes from './MessengerWindow.module.css'\r\n\r\nexport default function MessengerWindow(props) {\r\n    const [messageList, setMessageList] = useState([])\r\n    useEffect(() => {\r\n        if (props.user_id !== 0)\r\n            fetch(\"/api/messages\").then(response => {\r\n                response.json()\r\n                    .then(req => {\r\n                        console.log(req)\r\n                        setMessageList(req)\r\n                    })\r\n            })\r\n    }, [props.user_id])\r\n\r\n    function addMessageToList(message) {\r\n        message = {\r\n            text_message: message.text_message,\r\n            user_id: props.user_id,\r\n            user_name: props.user_name\r\n        }\r\n        setMessageList(prevList => [...prevList, message])\r\n        fetch(\"/api/message\", {\r\n            method: \"post\",\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify({\r\n                message: message.text_message,\r\n                user_id: props.user_id\r\n            })\r\n        }).then(r => console.log(\"message delivered\"))\r\n    }\r\n\r\n    return (\r\n        <div className={classes.window}>\r\n            {props.user_id !== 0 &&\r\n            <>\r\n                <MessageList user_id={props.user_id} messageList={messageList}/>\r\n                <MessengerFooter callbackAdd={addMessageToList}/>\r\n            </>\r\n            }\r\n        </div>\r\n    )\r\n}","import React, {useEffect, useState} from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport MessengerWindow from \"./messenger/MessengerWindow\";\r\nimport * as PropTypes from \"prop-types\";\r\n\r\nfunction Page() {\r\n    const [user_id, setUser_id] = useState(0)\r\n    const [user_name, setUser_name] = useState(\"\")\r\n    function doFetch() {\r\n        let login = prompt(\"User name:\", \"\")\r\n        let password = prompt(\"Password:\")\r\n        fetch(\"/api/getId\", {\r\n            method: \"post\",\r\n            headers: {\r\n                Accept: \"application/json\",\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify({\r\n                login: login,\r\n                password: password\r\n            })\r\n        }).then((response) => {\r\n            response.json().then(res => {\r\n                console.log(res)\r\n                if (res.user_id != null) {\r\n                    setUser_id(res.user_id)\r\n                    setUser_name(res.user_name)\r\n                }\r\n                else\r\n                    doFetch()\r\n            }).catch(() => {\r\n                doFetch()\r\n            })\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        doFetch()\r\n    }, [])\r\n    return <MessengerWindow user_id={user_id} user_name={user_name}/>;\r\n}\r\n\r\nPage.propTypes = {children: PropTypes.node};\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <Page/>\r\n    </React.StrictMode>,\r\n    document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}